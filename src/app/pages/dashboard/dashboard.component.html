<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="dashboard-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <h1 class="welcome-title">
      {{ getGreeting() }}, {{ currentUser()?.name || 'User' }}! ğŸ‘‹
    </h1>
    <p class="welcome-subtitle">Here's your journal overview</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card stat-primary">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats().total }}</h3>
        <p class="stat-label">Total Entries</p>
      </div>
    </div>

    <div class="stat-card stat-success">
      <div class="stat-icon">âœ“</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats().completed }}</h3>
        <p class="stat-label">Completed Tasks</p>
      </div>
    </div>

    <div class="stat-card stat-warning">
      <div class="stat-icon">â³</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats().pending }}</h3>
        <p class="stat-label">Pending Tasks</p>
      </div>
    </div>

    <div class="stat-card stat-info">
      <div class="stat-icon">ğŸ“…</div>
      <div class="stat-content">
        <h3 class="stat-value">{{ stats().events }}</h3>
        <p class="stat-label">Upcoming Events</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h3 class="section-title">Quick Actions</h3>
    <div class="actions-grid">
      <a routerLink="/journal" class="action-card">
        <div class="action-icon">ğŸ“</div>
        <h4>Journal</h4>
        <p>View and manage all entries</p>
      </a>
      <a routerLink="/scanandupload" class="action-card">
        <div class="action-icon">ğŸ“·</div>
        <h4>Scan & Upload</h4>
        <p>Upload and scan journal pages</p>
      </a>
    </div>
  </div>

  <!-- Content Grid -->
  <div class="content-grid">
    <!-- Recent Entries -->
    <div class="content-card">
      <div class="card-header">
        <h3 class="card-title">Recent Entries</h3>
        <a routerLink="/journal" class="view-all-link">View All â†’</a>
      </div>
      <div class="entries-list">
        <div *ngIf="recentEntries.length === 0" class="empty-state">
          <p>No entries yet. Start by creating your first entry!</p>
        </div>
        <div *ngFor="let entry of recentEntries" class="entry-item">
          <div class="entry-type-badge" [style.background-color]="getEntryTypeColor(entry.type)">
            {{ getEntryTypeIcon(entry.type) }}
          </div>
          <div class="entry-content">
            <h5 class="entry-title" [class.completed]="entry.completed">{{ entry.title }}</h5>
            <p class="entry-meta">
              <span class="entry-type">{{ entry.type }}</span>
              <span class="entry-date">{{ entry.date || (entry.createdAt | slice:0:10) }}</span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Upcoming Events -->
    <div class="content-card">
      <div class="card-header">
        <h3 class="card-title">Upcoming Events</h3>
      </div>
      <div class="entries-list">
        <div *ngIf="upcomingEvents.length === 0" class="empty-state">
          <p>No upcoming events scheduled.</p>
        </div>
        <div *ngFor="let event of upcomingEvents" class="entry-item">
          <div class="entry-type-badge" [style.background-color]="getEntryTypeColor(event.type)">
            {{ getEntryTypeIcon(event.type) }}
          </div>
          <div class="entry-content">
            <h5 class="entry-title">{{ event.title }}</h5>
            <p class="entry-meta">
              <span class="entry-date">{{ event.date | slice:0:10 }}</span>
            </p>
            <p *ngIf="event.notes" class="entry-notes">{{ event.notes }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Entry Types Breakdown -->
    <div class="content-card">
      <div class="card-header">
        <h3 class="card-title">Entry Types</h3>
      </div>
      <div class="types-breakdown">
        <div class="type-item">
          <div class="type-info">
            <span class="type-icon">âœ“</span>
            <span class="type-name">Tasks</span>
          </div>
          <span class="type-count">{{ stats().tasks }}</span>
        </div>
        <div class="type-item">
          <div class="type-info">
            <span class="type-icon">ğŸ“</span>
            <span class="type-name">Notes</span>
          </div>
          <span class="type-count">{{ stats().notes }}</span>
        </div>
        <div class="type-item">
          <div class="type-info">
            <span class="type-icon">ğŸ“…</span>
            <span class="type-name">Events</span>
          </div>
          <span class="type-count">{{ stats().events }}</span>
        </div>
        <div class="type-item">
          <div class="type-info">
            <span class="type-icon">ğŸ”„</span>
            <span class="type-name">Habits</span>
          </div>
          <span class="type-count">{{ stats().habits }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

